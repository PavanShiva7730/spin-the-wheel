const prizes = [
  "ğŸ“ 100% Free Coaching",
  "ğŸ â‚¹500 Amazon Coupon",
  "ğŸ“š Free Study Material",
  "ğŸ’° â‚¹500 Cashback",
  "âœ¨ Coaching @ â‚¹1"
];

const wheel = document.getElementById("wheel");
const spinBtn = document.getElementById("spinBtn");
const popup = document.getElementById("popup");
const popupText = document.getElementById("popupText");

let deg = 0;

function drawWheel() {
  const ctx = wheel.getContext("2d");
  const segmentAngle = 360 / prizes.length;

  for (let i = 0; i < prizes.length; i++) {
    const start = (segmentAngle * i) * Math.PI / 180;
    const end = (segmentAngle * (i + 1)) * Math.PI / 180;
    ctx.beginPath();
    ctx.moveTo(150, 150);
    ctx.arc(150, 150, 150, start, end);
    ctx.fillStyle = i % 2 === 0 ? "#818cf8" : "#a5b4fc";
    ctx.fill();
    ctx.save();
    ctx.translate(150, 150);
    ctx.rotate((start + end) / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#fff";
    ctx.font = "bold 13px sans-serif";
    ctx.fillText(prizes[i], 130, 10);
    ctx.restore();
  }
}
drawWheel();

spinBtn.addEventListener("click", () => {
  spinBtn.disabled = true;

  const segmentAngle = 360 / prizes.length;
  const randomIndex = Math.floor(Math.random() * prizes.length);
  const stopDeg = 360 - (randomIndex * segmentAngle) - segmentAngle / 2;
  const totalSpins = 6;
  deg += totalSpins * 360 + stopDeg;

  wheel.style.transition = "transform 5s ease-out";
  wheel.style.transform = `rotate(${deg}deg)`;

  setTimeout(() => {
    popupText.textContent = `ğŸ‰ You won: ${prizes[randomIndex]} ğŸ‰`;
    popup.classList.remove("hidden");
    spinBtn.disabled = false;
  }, 5000);
});

// Close popup on outside click
popup.addEventListener("click", () => {
  popup.classList.add("hidden");
});
